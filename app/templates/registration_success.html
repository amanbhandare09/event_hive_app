{% extends "base.html" %}

{% block title %}Registration Success | EventHive{% endblock %}

{% block extra_css %}
<style>
  .success-container {
    max-width: 600px;
    margin: 60px auto;
    padding: 40px;
    background-color: #1a1a1a;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.8);
    text-align: center;
  }

  .success-icon {
    font-size: 64px;
    color: #4CAF50;
    margin-bottom: 20px;
    animation: scaleIn 0.5s ease-out;
  }

  @keyframes scaleIn {
    from { transform: scale(0); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  h1 {
    color: #4CAF50;
    margin-bottom: 10px;
    font-size: 32px;
  }

  .event-details {
    background-color: #0d0d0d;
    padding: 20px;
    border-radius: 12px;
    margin: 30px 0;
    text-align: left;
    border-left: 4px solid #4CAF50;
  }

  .event-details h2 {
    color: #4CAF50;
    margin-top: 0;
    font-size: 24px;
  }

  .detail-row {
    margin: 12px 0;
    font-size: 16px;
  }

  .detail-label {
    color: #aaa;
    font-weight: 500;
  }

  .qr-section {
    background-color: #fff;
    padding: 30px;
    border-radius: 12px;
    margin: 30px 0;
    display: inline-block;
  }

  .qr-section img {
    max-width: 250px;
    height: auto;
    display: block;
    margin: 0 auto;
  }

  .qr-instructions {
    color: #ccc;
    font-size: 14px;
    margin-top: 20px;
    line-height: 1.6;
  }

  .token-info {
    background-color: #0d0d0d;
    padding: 15px;
    border-radius: 8px;
    margin: 20px 0;
    font-family: 'Courier New', monospace;
    word-break: break-all;
    font-size: 14px;
    color: #4CAF50;
  }

  .action-buttons {
    margin-top: 30px;
    display: flex;
    gap: 15px;
    justify-content: center;
    flex-wrap: wrap;
  }

  .btn {
    padding: 12px 24px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s;
    border: none;
    cursor: pointer;
    font-size: 16px;
  }

  .btn-primary {
    background-color: #4CAF50;
    color: #fff;
  }
  .btn-primary:hover {
    background-color: #45a049;
    transform: translateY(-2px);
  }

  .btn-secondary {
    background-color: #333;
    color: #fff;
  }
  .btn-secondary:hover {
    background-color: #444;
    transform: translateY(-2px);
  }

  .download-btn {
    background-color: #2196F3;
    color: #fff;
  }
  .download-btn:hover {
    background-color: #0b7dda;
  }
</style>
{% endblock %}

{% block content %}

<div class="success-container">
  <div class="success-icon">âœ“</div>

  <h1>Successfully Registered!</h1>
  <p style="color: #aaa; font-size: 18px;">You're all set for the event</p>

  <div class="event-details">
    <h2>{{ event.title }}</h2>

    <div class="detail-row">
      <span class="detail-label">Date:</span>
      {{ event.date.strftime('%d %b %Y') }}
    </div>

    <div class="detail-row">
      <span class="detail-label">Time:</span>
      {% if event.time %}
        {{ event.time.strftime('%I:%M %p') }}
      {% else %}
        TBA
      {% endif %}
    </div>

    <div class="detail-row">
      <span class="detail-label">Venue:</span>
      {{ event.venue if event.venue else 'Online' }}
    </div>

    <div class="detail-row">
      <span class="detail-label">Mode:</span>
      {{ event.mode.value|capitalize }}
    </div>
  </div>

  <div class="qr-section">
    <h3 style="color: #333; margin-top: 0;">Your Entry Pass</h3>

    {% if attendee.qr_code_path %}
    <img 
      src="{{ url_for('static', filename='qr_codes/qr_' ~ attendee.user_id ~ '_' ~ event.id ~ '_' ~ attendee.id ~ '.png') }}"
      alt="QR Code"
      style="width:200px;height:200px;"
    >
    {% else %}
      <p style="color: #666;">QR Code not available</p>
    {% endif %}
  </div>

  <div class="qr-instructions">
    <strong>ðŸ“± Save this QR code!</strong><br>
    Present at the event entrance for quick check-in.
  </div>

  <div class="token-info">
    <strong>Your Token:</strong><br>
    {{ attendee.token }}
  </div>

  <div class="action-buttons">

    {% if attendee.qr_code_path %}
      <a href="{{ url_for('static', filename=attendee.qr_code_path) }}"
        download="event_qr_{{ event.id }}.png"
        class="btn download-btn">
        Download QR Code
      </a>
    {% endif %}

    <a href="{{ url_for('main.profile') }}" class="btn btn-primary">
      Back to Events
    </a>

    <a href="{{ url_for('attendees.get_attendee', attendee_id=current_user.id, event_id=event.id) }}"
      class="btn btn-secondary">
      View All Attendees
    </a>

  </div>

</div>

{% endblock %}
